# === CMN-SERVICE 가 시작하는 Batch 를 관리함
batch:
  iot:
    destination: batch.iot.connect
    items:
      smallflow:
        note: (유솔) 소규모 유량계 데이터 수집 #일단위
        bindingKey: batch.iot.connect.smallFlow
#        cron: 0 0 * * * ? # 매 시간
        cron: 0 59 23 * * ? # 매 시간
      usage:
        note: (유솔) 스마트미터 수용가 및 사용량 수집
        bindingKey: batch.iot.connect.usage
#        cron: 0 0 4 * * ? # 매일
        cron: 0 0 23 * * ? # 매일
      leakage:
        note: 누수센서 데이터 수집 (유솔, 위플랫)
        bindingKey: batch.iot.connect.leakage
        cron: 0 30 0/2 * * ? #두시간 마다

  rev-connect:
    destination: batch.rev.connect
    items:
      waternet-taginfo:
        note: (워터넷) 태그 정보 수집
        bindingKey: batch.rev.connect.waternet.tagInfo
        cron: 0 10 * * * ? #매 1시간
      waternet-tagcollect:
        note: (워터넷) 태그 이력 수집
        bindingKey: batch.rev.connect.waternet.tagCollect
        cron: 0 * * * * ? # 매분
        interval: 5 #분
      waternet-usage:
        note: (워터넷) 수용가 사용량 수집
        bindingKey: batch.rev.connect.waternet.usage
        cron: 0 0 1 16 * ? #매달 16일

  rev-statistics:
    destination: batch.rev.statistics
    items:
      mnf:
        note: 블록 야간최소유량 집계
        bindingKey: batch.rev.update.mnf
        cron: 0 20 6 * * ? # 매일 6시 20분
      revenue:
        note: 공급량,사용량,무수량,유수율 집계
        bindingKey: batch.rev.update.supply
        cron: 0 0 1 * * ? # 매일 1시
      abnormal:
        note: 시설물 이상치 카운트 갱신
        bindingKey: batch.rev.update.abnormal
        cron: 0 20 * * * ? # 매 1시간